function Validation(){this.init=function(t){this.defaultParams={classItem:"valItem",attributeErrorMessage:"data-msg",attributeErrorClassMessage:"data-error-class-msg",attributeErrorClassInput:"data-error-class-input",attributeErrorBox:"data-box",attributePromptMessage:"data-prompt",attributePromptClassMessage:"data-prompt-class-msg",attributePromptBox:"data-prompt-box",attributeSuccessMessage:"data-success",attributeSuccessClassMessage:"data-success-class-msg",attributeSuccessClassInput:"data-success-class-input",attributeSuccessBox:"data-success-box",event:"submit",eventElement:"#submit",errorClass:"inputError",successClass:"inputSuccess",errorMessageClass:"errorMsgClass",successMessageClass:"successMsgClass",promptMessageClass:"promptClass",ajaxUrl:"ajax.php",ajax:!1,submitForm:!0,tpl:[],tpl_msg:[],errorMsgTpl:!1,promptMsgTpl:!1,successMsgTpl:!1,items:[],ajaxSubmitSuccess:function(t,e,s){e||s.submit()},submitSuccess:function(t,e){t||e.submit()},submitError:function(t,e){},ajaxOnblurSuccess:function(t,e,s){}},this.finalParams=this.defaultParams;for(var e in t)t.hasOwnProperty(e)&&void 0!==t[e]&&(this.finalParams[e]=t[e]);this.options=this.finalParams;for(var s=this.getValInput(),i=0;i<s.length;i++)s[i].onfocus=this.customPrompt.bind(this);if("submit"==this.options.event){var a=this.getSubmitElement();a.onclick=this.customSubmit.bind(this);for(var n=0;n<s.length;n++)s[n].onblur=this.clearPrompt.bind(this)}else if("onblur"==this.options.event)for(var r=0;r<s.length;r++)s[r].onblur=this.customValidationOnblur.bind(this)},this.customSubmit=function(t){t.preventDefault();var e=document.getElementsByClassName(this.options.classItem),s=this.getParent(this.getSubmitElement(),"FORM"),i=[];this.clearMsgBox();for(var a=0;a<e.length;a++){var n=e[a].nextElementSibling;if(null!=n&&n.classList.contains(this.options.errorMessageClass)&&n.parentNode.removeChild(n),e[a].hasAttribute("data-tpl")||this.hasTpl(e[a])){var r=this.getTpl(e[a]),o=this.tpls(),l=(this.tpls_msg(),e[a].value);o[r.trim()].test(l)?(this.deleteErrorMsg(e[a]),this.generateMsg(e[a],"success"),i.push(!0)):(this.deleteErrorMsg(e[a]),this.generateMsg(e[a],"error",this.getTplMsg(e[a])),i.push(!1))}else e[a].checkValidity()?(this.deleteErrorMsg(e[a]),this.generateMsg(e[a],"success"),i.push(!0)):(this.deleteErrorMsg(e[a]),this.generateMsg(e[a],"error"),i.push(!1))}this.findFalse(i)!==!1?this.options.ajax?this.ajaxValidPost(e,this.options.ajaxSubmitSuccess):this.options.submitForm&&this.options.submitSuccess(!1,s):this.options.submitError(!0,s)},this.customValidationOnblur=function(t){var e=t.target,s=e.nextSibling;if(null!=s&&s.classList.contains(this.options.errorMessageClass)&&s.parentNode.removeChild(s),e.hasAttribute("data-tpl")||this.hasTpl(e)){var i=this.getTpl(e),a=this.tpls(),n=e.value;a[i.trim()].test(n)?this.options.ajax?this.ajaxValidPost(e,this.options.ajaxOnblurSuccess):(this.deleteErrorMsg(e),this.generateMsg(e,"success")):(this.deleteErrorMsg(e),this.generateMsg(e,"error",this.getTplMsg(e)))}else e.checkValidity()?this.options.ajax?this.ajaxValidPost(e,this.options.ajaxOnblurSuccess):(this.deleteErrorMsg(e),this.generateMsg(e,"success")):(this.deleteErrorMsg(e),this.generateMsg(e,"error"))},this.customPrompt=function(t){var e=t.target;this.hasMsg(e,"prompt")&&(this.deleteErrorMsg(e),this.generateMsg(e,"prompt"))},this.clearPrompt=function(t){var e=t.target;if(this.deleteErrorMsg(e),e.hasAttribute(this.options.attributePromptBox)){var s=this.getElement(e.getAttribute(this.options.attributePromptBox));s.innerHTML=""}},this.clearMsgBox=function(){for(var t=this.getValInput(),e=0;e<t.length;e++){var s;t[e].hasAttribute(this.options.attributeErrorBox)&&(s=this.getElement(t[e].getAttribute(this.options.attributeErrorBox)),s.innerHTML=""),t[e].hasAttribute(this.options.attributePromptBox)&&(s=this.getElement(t[e].getAttribute(this.options.attributePromptBox)),s.innerHTML=""),t[e].hasAttribute(this.options.attributeSuccessBox)&&(s=this.getElement(t[e].getAttribute(this.options.attributeSuccessBox)),s.innerHTML="")}},this.getParent=function(t,e){return t.tagName==e?t:this.getParent(t.parentNode,e)},this.generateErrorMsg=function(t){var e=this.getInputErrorClass(t),s=this.getMsgErrorClass(t);if(t.classList.add(e),t.hasAttribute(this.options.attributeErrorMessage)){var i=document.createElement("span");if(i.classList.add(s),i.innerHTML=t.getAttribute(this.options.attributeErrorMessage),t.hasAttribute(this.options.attributeErrorBox)){var a=this.getElement(t.getAttribute(this.options.attributeErrorBox));i.classList.add("error-to-"+t.getAttribute("name")),a.appendChild(i)}else this.insertAfter(i,t)}},this.generateMsg=function(t,e,s){s=s||"";var i,a,n;if("error"==e&&(i=this.getInputErrorClass(t),a=this.getMsgErrorClass(t),t.classList.add(i),n=this.options.attributeErrorBox),"prompt"==e&&(a=this.getMsgPromptClass(t),n=this.options.attributePromptBox),"success"==e&&(i=this.getInputSuccessClass(t),a=this.getMsgSuccessClass(t),t.classList.add(i),n=this.options.attributeSuccessBox),this.hasMsg(t,e)||""!=s){var r,o=""!=s?s:this.getMsg(t,e);(r=this.generateTplMsg(t,e,o))&&(o=r);var l=document.createElement("span");if(l.classList.add(a),l.innerHTML=o,t.hasAttribute(n)){var h=this.getElement(t.getAttribute(n));l.classList.add(e+"-to-"+t.getAttribute("name")),h.appendChild(l)}else this.insertAfter(l,t)}},this.generateAjaxErrorMsg=function(t,e){t.classList.add(this.options.errorClass);var s=document.createElement("span");s.classList.add(this.options.errorMessageClass),s.innerHTML=e,this.insertAfter(s,t)},this.generateTplMsg=function(t,e,s){return"error"==e&&this.options.errorMsgTpl?this.options.errorMsgTpl.replace("{msg}",s):"prompt"==e&&this.options.promptMsgTpl?this.options.promptMsgTpl.replace("{msg}",s):!("success"!=e||!this.options.successMsgTpl)&&this.options.successMsgTpl.replace("{msg}",s)},this.getInputErrorClass=function(t){var e=this.getScriptItem(t);return"undefined"!=typeof e.errorClass?e.errorClass:t.hasAttribute(this.options.attributeErrorClassInput)?t.getAttribute(this.options.attributeErrorClassInput):this.options.errorClass},this.getMsgErrorClass=function(t){var e=this.getScriptItem(t);return"undefined"!=typeof e.errorMsgClass?e.errorMsgClass:t.hasAttribute(this.options.attributeErrorClassMessage)?t.getAttribute(this.options.attributeErrorClassMessage):this.options.errorMessageClass},this.getMsgPromptClass=function(t){var e=this.getScriptItem(t);return"undefined"!=typeof e.promptMsgClass?e.promptMsgClass:t.hasAttribute(this.options.attributePromptClassMessage)?t.getAttribute(this.options.attributePromptClassMessage):this.options.promptMessageClass},this.getMsgSuccessClass=function(t){var e=this.getScriptItem(t);return"undefined"!=typeof e.successMsgClass?e.successMsgClass:t.hasAttribute(this.options.attributeSuccessClassMessage)?t.getAttribute(this.options.attributeSuccessClassMessage):this.options.successMessageClass},this.getInputSuccessClass=function(t){var e=this.getScriptItem(t);return"undefined"!=typeof e.successClass?e.successClass:t.hasAttribute(this.options.attributeSuccessClassInput)?t.getAttribute(this.options.attributeSuccessClassInput):this.options.successClass},this.getMsg=function(t,e){return this.hasScriptMsg(t,e)?this.getScriptMsg(t,e):"error"==e?t.getAttribute(this.options.attributeErrorMessage):"prompt"==e?t.getAttribute(this.options.attributePromptMessage):"success"==e?t.getAttribute(this.options.attributeSuccessMessage):void 0},this.hasMsg=function(t,e){var s;return!!this.hasScriptMsg(t,e)||("error"==e&&(s=this.options.attributeErrorMessage),"prompt"==e&&(s=this.options.attributePromptMessage),"success"==e&&(s=this.options.attributeSuccessMessage),t.hasAttribute(s))},this.getScriptMsg=function(t,e){var s=this.getScriptItem(t);return this.hasScriptMsg(t,"error")&&"error"==e?s.errorMsg:this.hasScriptMsg(t,"prompt")&&"prompt"==e?s.promptMsg:this.hasScriptMsg(t,"success")&&"success"==e?s.successMsg:void 0},this.hasScriptMsg=function(t,e){var s=t.getAttribute("name");if(s){if(s=this.getScriptItem(s),"error"==e)return"undefined"!=typeof s.errorMsg;if("prompt"==e)return"undefined"!=typeof s.promptMsg;if("success"==e)return"undefined"!=typeof s.successMsg}},this.hasTpl=function(t){var e=t.getAttribute("name");if(e)return e=this.getScriptItem(e),"undefined"!=typeof e.tpl},this.getTpl=function(t){if(this.hasTpl(t)){var e=t.getAttribute("name");return e=this.getScriptItem(e),e.tpl}return!!t.hasAttribute("data-tpl")&&t.getAttribute("data-tpl")},this.getTplMsg=function(t){var e=t.getAttribute("name"),s=this.getScriptItem(e);if(t.hasAttribute("data-tpl-msg"))return t.getAttribute("data-tpl-msg");if("undefined"!=typeof s.tplMsg)return s.tplMsg;var i=this.tpls_msg();return i[this.getTpl(t)]},this.getScriptItem=function(t){"string"!=typeof t&&(t=t.getAttribute("name"));for(var e=0;e<this.options.items.length;e++)if(this.options.items[e].item==t)return this.options.items[e];return!1},this.getSubmitElement=function(){var t;return t="#"==this.options.eventElement[0]?document.getElementById(this.options.eventElement.slice(1)):document.getElementsByClassName(this.options.eventElement.slice(1))},this.getElement=function(t){var e;return e="#"==t[0]?document.getElementById(t.slice(1)):document.getElementsByClassName(t.slice(1))},this.getValInput=function(){var t;return t=document.getElementsByClassName(this.options.classItem)},this.getInputByName=function(t){return document.getElementsByName(t)},this.clearInput=function(t){var e=this.getInputByName(t);if(e.length>0)for(var s=0;s<e.length;s++)this.deleteErrorMsg(e[s]),e[s].value=""},this.insertAfter=function(t,e){var s=e.parentNode,i=e.nextSibling;return i?s.insertBefore(t,i):s.appendChild(t)},this.findFalse=function(t){for(var e=0;e<t.length;e++)if(t[e]===!1)return!1;return!0},this.ajaxValidPost=function(t,e){if(e=e||function(){},this.options.ajax){var s=new XMLHttpRequest,i=this,a=!1;if(t.length>1){for(var n="",r=0;r<t.length;r++)n+=t[r].getAttribute("name")+"="+encodeURIComponent(t[r].value)+"&";s.open("POST",this.options.ajaxUrl,!0),s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.onreadystatechange=function(){if(4==s.readyState)if(200==s.status){try{var e=JSON.parse(s.responseText)}catch(t){e=!1}if(e)for(var n=0;n<e.length;n++){var r=document.getElementsByName(e[n].item);0==e[n].status?(i.deleteErrorMsg(r[0]),i.generateMsg(r[0],"error",e[n].error_msg),a=!0):(i.deleteErrorMsg(r[0]),i.generateMsg(r[0],"success"))}}else for(var o=0;o<t.length;o++)i.deleteErrorMsg(t[o]),i.generateMsg(t[o],"error","Ошибка "+s.status),a=!0},n=n.slice(0,n.length-1),s.send(n)}else t.hasAttribute("data-url")&&(s.open("POST",this.options.ajaxUrl,!0),s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.onreadystatechange=function(){if(4==s.readyState)if(200==s.status){try{var e=JSON.parse(s.responseText)}catch(t){e=!1}e&&(0==e.status?(i.deleteErrorMsg(t),i.generateMsg(t,"error",e.error_msg),a=!0):(i.generateMsg(t,"success"),i.deleteErrorMsg(t)))}else i.deleteErrorMsg(t),i.generateMsg(t,"error","Ошибка "+s.status),a=!0},s.send(t.getAttribute("name")+"="+encodeURIComponent(t.value)));var o=this.getParent(this.getSubmitElement(),"FORM");s.onloadend=function(){e(s.responseText,a,o)}}},this.deleteErrorMsg=function(t){var e=this.getScriptItem(t);if("undefined"!=typeof e.errorClass&&t.classList.remove(e.errorClass),"undefined"!=typeof e.successClass&&t.classList.remove(e.successClass),t.classList.remove(this.options.errorClass),t.classList.remove(this.options.successClass),null!=t.nextElementSibling&&(t.nextElementSibling.classList.contains(this.getMsgErrorClass(t))?t.nextElementSibling.remove():t.nextElementSibling.classList.contains(this.getMsgPromptClass(t))?t.nextElementSibling.remove():t.nextElementSibling.classList.contains(this.getMsgSuccessClass(t))&&t.nextElementSibling.remove(),t.hasAttribute("data-box"))){var s=document.getElementsByClassName("error-to-"+t.getAttribute("name"));s.length>0&&s[0].remove()}},this.tpl=[],this.tpls=function(){for(var t=0;t<this.options.tpl.length;t++)""!==this.options.tpl[t].name&&""!==this.options.tpl[t].tpl&&(this.tpl[this.options.tpl[t].name]=this.options.tpl[t].tpl);return this.tpl.number=/^\d+$/,this.tpl.lat=/^[a-zA-Z]+$/,this.tpl.kir=/^[А-Яа-яЁё\s]+$/,this.tpl["kir+lat"]=/^[a-zA-ZА-Яа-яЁё\s]+$/,this.tpl["kir+number"]=/^[\dА-Яа-яЁё\s]+$/,this.tpl["lat+number"]=/^[\da-zA-Z]+$/,this.tpl.email=/^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$/,this.tpl},this.tpl_msg=[],this.tpls_msg=function(){for(var t=0;t<this.options.tpl_msg.length;t++)""!==this.options.tpl_msg[t].name&&""!==this.options.tpl_msg[t].msg&&(this.tpl_msg[this.options.tpl_msg[t].name]=this.options.tpl_msg[t].msg);return this.tpl_msg.number="Толь цифры",this.tpl_msg.lat="Только латиница",this.tpl_msg.kir="Только кириллица",this.tpl_msg["kir+lat"]="Только кириллица и латиница",this.tpl_msg["kir+number"]="Только кириллица и цифры",this.tpl_msg["lat+number"]="Только латиница и цифры",this.tpl_msg.email="Не корректный email",this.tpl_msg},this.addTpl=function(t,e,s){this.tpl[t]=e,this.tpl_msg[t]=s}}!function(t,e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):t.lightbox=e(t.jQuery)}(this,function(t){function e(e){this.album=[],this.currentImageIndex=void 0,this.init(),this.options=t.extend({},this.constructor.defaults),this.option(e)}return e.defaults={albumLabel:"Image %1 of %2",alwaysShowNavOnTouchDevices:!1,fadeDuration:500,fitImagesInViewport:!0,positionFromTop:50,resizeDuration:700,showImageNumberLabel:!0,wrapAround:!1,disableScrolling:!1},e.prototype.option=function(e){t.extend(this.options,e)},e.prototype.imageCountLabel=function(t,e){return this.options.albumLabel.replace(/%1/g,t).replace(/%2/g,e)},e.prototype.init=function(){this.enable(),this.build()},e.prototype.enable=function(){var e=this;t("body").on("click","a[rel^=lightbox], area[rel^=lightbox], a[data-lightbox], area[data-lightbox]",function(s){return e.start(t(s.currentTarget)),!1})},e.prototype.build=function(){var e=this;t('<div id="lightboxOverlay" class="lightboxOverlay"></div><div id="lightbox" class="lightbox"><div class="lb-outerContainer"><div class="lb-container"><img class="lb-image" src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" /><div class="lb-nav"><a class="lb-prev" href="" ></a><a class="lb-next" href="" ></a></div><div class="lb-loader"><a class="lb-cancel"></a></div></div></div><div class="lb-dataContainer"><div class="lb-data"><div class="lb-details"><span class="lb-caption"></span><span class="lb-number"></span></div><div class="lb-closeContainer"><a class="lb-close"></a></div></div></div></div>').appendTo(t("body")),this.$lightbox=t("#lightbox"),this.$overlay=t("#lightboxOverlay"),this.$outerContainer=this.$lightbox.find(".lb-outerContainer"),this.$container=this.$lightbox.find(".lb-container"),this.containerTopPadding=parseInt(this.$container.css("padding-top"),10),this.containerRightPadding=parseInt(this.$container.css("padding-right"),10),this.containerBottomPadding=parseInt(this.$container.css("padding-bottom"),10),this.containerLeftPadding=parseInt(this.$container.css("padding-left"),10),this.$overlay.hide().on("click",function(){return e.end(),!1}),this.$lightbox.hide().on("click",function(s){return"lightbox"===t(s.target).attr("id")&&e.end(),!1}),this.$outerContainer.on("click",function(s){return"lightbox"===t(s.target).attr("id")&&e.end(),!1}),this.$lightbox.find(".lb-prev").on("click",function(){return 0===e.currentImageIndex?e.changeImage(e.album.length-1):e.changeImage(e.currentImageIndex-1),!1}),this.$lightbox.find(".lb-next").on("click",function(){return e.currentImageIndex===e.album.length-1?e.changeImage(0):e.changeImage(e.currentImageIndex+1),!1}),this.$lightbox.find(".lb-loader, .lb-close").on("click",function(){return e.end(),!1})},e.prototype.start=function(e){function s(t){i.album.push({link:t.attr("href"),title:t.attr("data-title")||t.attr("title")})}var i=this,a=t(window);a.on("resize",t.proxy(this.sizeOverlay,this)),t("select, object, embed").css({visibility:"hidden"}),this.sizeOverlay(),this.album=[];var n,r=0,o=e.attr("data-lightbox");if(o){n=t(e.prop("tagName")+'[data-lightbox="'+o+'"]');for(var l=0;l<n.length;l=++l)s(t(n[l])),n[l]===e[0]&&(r=l)}else if("lightbox"===e.attr("rel"))s(e);else{n=t(e.prop("tagName")+'[rel="'+e.attr("rel")+'"]');for(var h=0;h<n.length;h=++h)s(t(n[h])),n[h]===e[0]&&(r=h)}var c=a.scrollTop()+this.options.positionFromTop,u=a.scrollLeft();this.$lightbox.css({top:c+"px",left:u+"px"}).fadeIn(this.options.fadeDuration),this.options.disableScrolling&&t("body").addClass("lb-disable-scrolling"),this.changeImage(r)},e.prototype.changeImage=function(e){var s=this;this.disableKeyboardNav();var i=this.$lightbox.find(".lb-image");this.$overlay.fadeIn(this.options.fadeDuration),t(".lb-loader").fadeIn("slow"),this.$lightbox.find(".lb-image, .lb-nav, .lb-prev, .lb-next, .lb-dataContainer, .lb-numbers, .lb-caption").hide(),this.$outerContainer.addClass("animating");var a=new Image;a.onload=function(){var n,r,o,l,h,c,u;i.attr("src",s.album[e].link),n=t(a),i.width(a.width),i.height(a.height),s.options.fitImagesInViewport&&(u=t(window).width(),c=t(window).height(),h=u-s.containerLeftPadding-s.containerRightPadding-20,l=c-s.containerTopPadding-s.containerBottomPadding-120,s.options.maxWidth&&s.options.maxWidth<h&&(h=s.options.maxWidth),s.options.maxHeight&&s.options.maxHeight<h&&(l=s.options.maxHeight),(a.width>h||a.height>l)&&(a.width/h>a.height/l?(o=h,r=parseInt(a.height/(a.width/o),10),i.width(o),i.height(r)):(r=l,o=parseInt(a.width/(a.height/r),10),i.width(o),i.height(r)))),s.sizeContainer(i.width(),i.height())},a.src=this.album[e].link,this.currentImageIndex=e},e.prototype.sizeOverlay=function(){this.$overlay.width(t(document).width()).height(t(document).height())},e.prototype.sizeContainer=function(t,e){function s(){i.$lightbox.find(".lb-dataContainer").width(r),i.$lightbox.find(".lb-prevLink").height(o),i.$lightbox.find(".lb-nextLink").height(o),i.showImage()}var i=this,a=this.$outerContainer.outerWidth(),n=this.$outerContainer.outerHeight(),r=t+this.containerLeftPadding+this.containerRightPadding,o=e+this.containerTopPadding+this.containerBottomPadding;a!==r||n!==o?this.$outerContainer.animate({width:r,height:o},this.options.resizeDuration,"swing",function(){s()}):s()},e.prototype.showImage=function(){this.$lightbox.find(".lb-loader").stop(!0).hide(),this.$lightbox.find(".lb-image").fadeIn("slow"),this.updateNav(),this.updateDetails(),this.preloadNeighboringImages(),this.enableKeyboardNav()},e.prototype.updateNav=function(){var t=!1;try{document.createEvent("TouchEvent"),t=!!this.options.alwaysShowNavOnTouchDevices}catch(t){}this.$lightbox.find(".lb-nav").show(),this.album.length>1&&(this.options.wrapAround?(t&&this.$lightbox.find(".lb-prev, .lb-next").css("opacity","1"),this.$lightbox.find(".lb-prev, .lb-next").show()):(this.currentImageIndex>0&&(this.$lightbox.find(".lb-prev").show(),t&&this.$lightbox.find(".lb-prev").css("opacity","1")),this.currentImageIndex<this.album.length-1&&(this.$lightbox.find(".lb-next").show(),t&&this.$lightbox.find(".lb-next").css("opacity","1"))))},e.prototype.updateDetails=function(){var e=this;if("undefined"!=typeof this.album[this.currentImageIndex].title&&""!==this.album[this.currentImageIndex].title&&this.$lightbox.find(".lb-caption").html(this.album[this.currentImageIndex].title).fadeIn("fast").find("a").on("click",function(e){void 0!==t(this).attr("target")?window.open(t(this).attr("href"),t(this).attr("target")):location.href=t(this).attr("href")}),this.album.length>1&&this.options.showImageNumberLabel){var s=this.imageCountLabel(this.currentImageIndex+1,this.album.length);this.$lightbox.find(".lb-number").text(s).fadeIn("fast")}else this.$lightbox.find(".lb-number").hide();this.$outerContainer.removeClass("animating"),this.$lightbox.find(".lb-dataContainer").fadeIn(this.options.resizeDuration,function(){return e.sizeOverlay()})},e.prototype.preloadNeighboringImages=function(){if(this.album.length>this.currentImageIndex+1){var t=new Image;t.src=this.album[this.currentImageIndex+1].link}if(this.currentImageIndex>0){var e=new Image;e.src=this.album[this.currentImageIndex-1].link}},e.prototype.enableKeyboardNav=function(){t(document).on("keyup.keyboard",t.proxy(this.keyboardAction,this))},e.prototype.disableKeyboardNav=function(){t(document).off(".keyboard")},e.prototype.keyboardAction=function(t){var e=27,s=37,i=39,a=t.keyCode,n=String.fromCharCode(a).toLowerCase();a===e||n.match(/x|o|c/)?this.end():"p"===n||a===s?0!==this.currentImageIndex?this.changeImage(this.currentImageIndex-1):this.options.wrapAround&&this.album.length>1&&this.changeImage(this.album.length-1):("n"===n||a===i)&&(this.currentImageIndex!==this.album.length-1?this.changeImage(this.currentImageIndex+1):this.options.wrapAround&&this.album.length>1&&this.changeImage(0))},e.prototype.end=function(){this.disableKeyboardNav(),t(window).off("resize",this.sizeOverlay),this.$lightbox.fadeOut(this.options.fadeDuration),this.$overlay.fadeOut(this.options.fadeDuration),t("select, object, embed").css({visibility:"visible"}),this.options.disableScrolling&&t("body").removeClass("lb-disable-scrolling")},new e});